# 2024-NC2-M20-ScreenTime
<pre>
2024 Apple Deveopler Academy @ POSTECH, Morning Session AengZi & TEO
ğŸ“… 2024.06.10(Mon) - 2024.06.21(Fri)
ğŸ“² ios 17.4/SwiftUI/
</pre>


## ğŸ¥ Youtube Link
(ì¶”í›„ ë§Œë“¤ì–´ì§„ ìœ íŠœë¸Œ ë§í¬ ì¶”ê°€)

## â³ About Screen Time
![ScreenTime](https://github.com/DeveloperAcademy-POSTECH/2024-NC2-M20-ScreenTime/blob/main/ScreenTime.png)

> ë””ì§€í„¸ ê¸°ê¸°ì˜ ì‚¬ìš© ì‹œê°„ì„ ì¶”ì í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥
> 

**Screen Time**ì€ ì›¹ ì‚¬ìš© ë°ì´í„°ë¥¼ ê³µìœ  ë° ì¶”ì , ê´€ë¦¬í•˜ëŠ” ê²ƒê³¼ ê´€ë ¨ëœ ê¸°ìˆ ì…ë‹ˆë‹¤.

$\color{#5c56d2} \bf ê¸°ê¸°$ $\color{#5c56d2} \bf ì‚¬ìš©ì‹œê°„$ $\color{#5c56d2} \bf ì¶”ì $ DeviceActivity

ê¸°ê¸° ì‚¬ìš©ì‹œê°„, ì•± ì„œë¹„ìŠ¤, ì›¹ ì‚¬ì´íŠ¸ì— ë¨¸ë¬¸ ì‹œê°„ì„ ì¶”ì í•˜ê³  ê¸°ë¡, ë¶„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

$\color{#5c56d2} \bf ìŠ¤í¬ë¦°íƒ€ì„$ $\color{#5c56d2} \bf ì œì–´$ Managed Settings

ê¸°ê¸° ì‚¬ìš© ì‹œê°„ì„ ì¶”ì í•´ì„œ íŠ¹ì • ì–´í”Œì´ë‚˜ ì›¹ ì‚¬ì´íŠ¸ì— ë¨¸ë¬´ë¥´ëŠ” ì‹œê°„ì„ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

$\color{#5c56d2} \bf ìŠ¤í¬ë¦°íƒ€ì„$ $\color{#5c56d2} \bf ì‚¬ìš©ëŸ‰$ $\color{#5c56d2} \bf ê³µìœ $ FamilyControls

ë³´í˜¸ìê°€ ìë…€ì˜ ìŠ¤í¬ë¦° íƒ€ì„ì„ ê³µìœ ë°›ì„ ìˆ˜ ìˆê³  ê·¸ê²ƒì„ ë³´í˜¸ì°¨ì›ì—ì„œ ì œí•œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸ¯ What we focus on?
### **ğŸ”Â ìš°ë¦¬ê°€ Screen Timeì—ì„œ ì§‘ì¤‘í•œ â€˜ìŠ¤í¬ë¦°íƒ€ì„ ì œì–´â€™**(Managed Settings)

**1. ë‹¤ìš´íƒ€ì„**

íŠ¹ì • ì‹œê°„ì„ ì •í•´ì„œ ê·¸ ì‹œê°„ëŒ€ì—ëŠ” ê¸°ë³¸ì ì¸ ì•±ì¸ ì„¤ì •, ê±´ê°•, ì „í™” ë“±ì˜ ì•±ê³¼ ë³„ê°œë¡œ ì„ íƒí•´ ë‘” ì•± ì´ì™¸ì˜ ì‚¬ìš©ì„ ì œí•œ

**2. ì•± ì‹œê°„ ì œí•œ**

íŠ¹ì • ì•±ì„ ì¼ì •ì‹œê°„ ë™ì•ˆë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì œí•œ

**3. ì»¨í…ì¸  ë° ê°œì¸ì •ë³´ ë³´í˜¸ ì œí•œ**

ì•± ì„¤ì¹˜ì™€ ì‚­ì œ, íŠ¹ì • ì‚¬ì´íŠ¸ì™€ ì½˜í…ì¸ ë¥¼ ì•„ì˜ˆ ì ‘ì†í•  ìˆ˜ ì—†ë„ë¡ ì„¤ì •í•˜ëŠ” ê¸°ëŠ¥

## ğŸ’¼ Use Case
- ì§‘ì¤‘ëª¨ë“œ(Focus)ì—ì„œëŠ” ìœ ì €ì™€ ìœ ì €ì˜ ìƒí™©ì— ë§ê²Œ ì•± ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ì œí•œì„ í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì´ ìˆì§€ë§Œ ì‹œê°„ ì„¤ì •ì´ ì–´ë µë‹¤!
- ìŠ¤í¬ë¦°íƒ€ì„(Screen Time)ì—ì„œëŠ” ì•± ì œí•œ ë° ì‹œê°„ ì„¤ì •ì´ ê°€ëŠ¥í•˜ì§€ë§Œ ìœ ì €ì™€ ìœ ì €ì˜ ìƒí™©ì— ë§ê²Œ ì„¤ì •í•  ìˆ˜ ì—†ë‹¤!

â†’ Screen Timeì˜ ì•± ì ‘ê·¼/ì‚¬ìš©ì„ ê´€ë¦¬í•˜ëŠ” ManagedSettings í”„ë ˆì„ì›Œí¬: ë‹¤ìš´íƒ€ì„ ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ì•Œë§ëŠ” ë‹¤ìš´íƒ€ì„ ì§‘ì¤‘ëª¨ë“œë¥¼ ê°œë°œí•´ë³´ì!

### â†’ ì•± ì‚¬ìš© ì‹œê°„ì„ ì œí•œí•¨ìœ¼ë¡œ ì—…ë¬´ì— ëŒ€í•œ ì§‘ì¤‘ì„ ë„ì™€ì£¼ëŠ” $\color{#5c56d2} \bf ë½€ëª¨ë„ë¡œ$ $\color{#5c56d2} \bf íƒ€ì´ë¨¸$ ë¥¼ ë§Œë“¤ì–´ë³´ì!
> ë½€ëª¨ë„ë¡œ ê¸°ë²•(Pomodoro Technique)ì´ë€? </br> ì§‘ì¤‘ë ¥ í–¥ìƒì´ ëª©ì ì¸ ì‹œê°„ ê´€ë¦¬ ë°©ë²•ë¡ ìœ¼ë¡œ, **25ë¶„ ë™ì•ˆ ë¬´ì–¸ê°€ì— ì§‘ì¤‘í•˜ê³  5ë¶„ ë™ì•ˆ ì‰¬ëŠ” ê²ƒì„ 4ë²ˆ ë°˜ë³µí•˜ê³ , ê·¸ ë’¤ì— 30ë¶„ê°„ ì‰¬ë„ë¡ ì‹œê°„ì„ ë°°ë¶„**í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì´ë£¨ì–´ì§„ë‹¤. ì´ ë•Œ, "25ë¶„ ì§‘ì¤‘ + 5ë¶„ íœ´ì‹"ì˜ ì‚¬ì´í´ì„ ê°€ë¦¬ì¼œ â€œë½€ëª¨ë„ë¡œâ€ë¼ê³  í•˜ê³ , ì´ ì‚¬ì´í´ì„ 1íšŒ ì™„ë£Œí•˜ëŠ” ê²ƒì„ "1 ë½€ëª¨ë„ë¡œ" ë¼ê³  í•œë‹¤.



## ğŸ–¼ï¸ Prototype
![prototype](https://github.com/DeveloperAcademy-POSTECH/2024-NC2-M20-ScreenTime/blob/main/prototype.gif)

## ğŸ› ï¸ About Code
### 1. ManagedSetting ê¶Œí•œ ìš”ì²­


```swift
import SwiftUI
import FamilyControls

@main
struct ScreenTimeApp: App {
    let center = AuthorizationCenter.shared
    
    var body: some Scene {
        WindowGroup {
            ContentView()
                .onAppear {
                    Task {
                        do {
                            try await center.requestAuthorization(for: .individual)
                        } catch {
                            print("Fail: \(error)")
                        }
                    }
                }
        }
    }
}
```

ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸ì¸ App êµ¬ì¡°ì²´ì— FamilyControlsì— ëŒ€í•œ ê¶Œí•œì„ ìš”ì²­ ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.

iOS15ì—ì„œëŠ” ê°€ì¡± êµ¬ì„±ì› ì¤‘ ë¶€ëª¨ ê¶Œí•œì˜ ìŠ¹ì¸ì´ ìˆì–´ì•¼ ì‹¤í–‰ê°€ëŠ¥ í–ˆì§€ë§Œ, iOS16 ë²„ì „ë¶€í„° ê°€ì¡± êµ¬ì„±ì›ì˜ ìŠ¹ì¸ ì—†ì´ ìì‹ ì˜ iPhoneì— ìŠ¤ìŠ¤ë¡œ ê¶Œí•œì„ ìš”ì²­í™œ ìˆ˜ ìˆë„ë¡ ì—…ë°ì´íŠ¸ ë˜ì—ˆìŠµë‹ˆë‹¤ (.individual ì„ íƒ)

### 2. ManagedSettingì„ ê´€ë¦¬í•˜ëŠ” ê°ì²´


```swift
import Foundation
import FamilyControls
import ManagedSettings

class ManagedSettingModel: ObservableObject {
    static var shared = ManagedSettingModel()
    
    let store = ManagedSettingsStore()
    
    @Published var selectionToDiscourage: FamilyActivitySelection
    
    init() {
        selectionToDiscourage = FamilyActivitySelection()
    }
    
		...
}
```

ê¶Œí•œì„ ì œì–´í•˜ëŠ” ê°ì²´ë¥¼ ë‹¨ í•˜ë‚˜ë§Œ ë‘ê¸° ìœ„í•´ SingleToníŒ¨í„´ìœ¼ë¡œ ManagedSettingëª¨ë¸ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

ì‹±ê¸€í†¤ íŒ¨í„´ì€ í•˜ë‚˜ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤(ê°ì²´)ë§Œ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ìƒí™©ì— êµ¬í˜„í•©ë‹ˆë‹¤.

ì–´í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ ì˜ì—­ì—ì„œ ë™ì¼í•œ ê°ì²´ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì¥ì  ë•ë¶„ì— ìœ ì € ì •ë³´, ì•± ì„¤ì •ê³¼ ê°™ì´, ì¸ìŠ¤í„´ìŠ¤ë“¤ì´ ê¼¬ì´ëŠ” ìƒí™©ì„ ë°©ì§€í•˜ê³ , ë©”ëª¨ë¦¬ì˜ ë‚­ë¹„ë¥¼ ë§‰ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í˜„ì¬ ìƒí™©ì—ì„œëŠ” íŠ¹íˆ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ì œí•œê³¼ í•´ì œë¥¼ ì œì–´í•˜ëŠ” ê°ì²´ëŠ” ë‹¨ í•˜ë‚˜ë§Œ ì¡´ì¬í•´ì•¼ ê¼¬ì´ì§€ ì•Šê³ , ì˜ë„ì¹˜ ì•Šì€ ì–´í”Œ ì œí•œ/í•´ì œë¥¼ ë°©ì§€í•  ìˆ˜ ìˆì–´ì„œ SingleToníŒ¨í„´ì„ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

ë‹¤ë¥¸ íŒŒì¼ì—ì„œëŠ”

`ManagedSettingModel.shared.[ ë©”ì„œë“œ í˜¹ì€ í”„ë¡œí¼í‹° ]` ì½”ë“œë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤

### 3. ì•± ì œí•œ ë° í•´ì œ ê¸°ëŠ¥


```swift
import Foundation
import FamilyControls
import ManagedSettings

class ManagedSettingModel: ObservableObject {
    ...
    
    func setShieldRestrictions() {
        let applications = ManagedSettingModel.shared.selectionToDiscourage
        
        storeshield.applications = applications.applicationTokens.isEmpty ? nil : applications.applicationTokens
        store.shield.applicationCategories = applications.categoryTokens.isEmpty ? nil : ShieldSettings.ActivityCategoryPolicy.specific(applications.categoryTokens)
    }
    
    func freeShieldRestrictions() {
        store.shield.applications = nil
        store.shield.applicationCategories =  nil
    }
    
    func isSelectionEmpty() -> Bool {
        selectionToDiscourage.applicationTokens.isEmpty &&
        selectionToDiscourage.categoryTokens.isEmpty &&
        selectionToDiscourage.webDomainTokens.isEmpty
    }
    
}
```

ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì œí•œ, í•´ì œí•˜ê¸° ìœ„í•´ì„œ `ManagedSettingsStore()` ì˜ `sheild` ì˜ `applications` ì— ì„ íƒí•œ ì–´í”Œì˜ í† í°ê°’ì„ ì¶”ê°€í•˜ê±°ë‚˜ ë¹„ì›Œì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

ìœ„ ì½”ë“œì˜ ê²½ìš°

`setShieldRestrictions()` ë©”ì„œë“œ ì„ ì–¸í•˜ê³  ì–´í”Œë¦¬ì¼€ì´ì…˜ í† í°ì„ ë‹´ì„ ìˆ˜ ìˆê²Œ í•˜ì˜€ê³ 

`freeShieldRestrictions()` ë©”ì„œë“œë¥¼ ì„ ì–¸í•˜ê³  ì–´í”Œë¦¬ì¼€ì´ì…˜ í† í°ì„ ë¹„ìš¸ ìˆ˜ ìˆê²Œ í•˜ì˜€ìŠµë‹ˆë‹¤.

ì´ì œ í•´ë‹¹ ë©”ì„œë“œë“¤ì„ í•„ìš”í•œ ì‹œì ì— ì‹¤í–‰ ì‹œì¼œì£¼ë©´ ì•±ì„ ì œí•œí•˜ê±°ë‚˜ í•´ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!

### 4. ì œí•œ í•  ì•±ì„ ì„ íƒí•˜ëŠ” ë°©ë²•

```swift
import SwiftUI
import FamilyControls

struct RoutinePrepareView: View {
		@EnvironmentObject var managedSettingModel: ManagedSettingModel
    @State var isPresented = false
    
    var body: some View {
        VStack { ... }
        }
        .familyActivityPicker(isPresented: $isPresented,
											        selection: $managedSettingModel.selectionToDiscourage)

    }
}
```

Viewë¥¼ ê·¸ë¦´ ë•Œ, ìµœìƒìœ„ ë·°ì— ì•„ë˜ ìˆ˜ì •ìë¥¼ ì‘ì„±í•˜ê³ 

ì²« ë²ˆì§¸ ì¸ìë¡œëŠ” trueë¡œ ë°”ë€” ìˆ˜ ìˆëŠ” ìƒíƒœê°’

ë‘ ë²ˆì§¸ ì¸ìë¡œëŠ” ì„ íƒí•œ ì•±ì˜ í† í°ì„ ë‹´ì„ ìˆ˜ ìˆëŠ” ìƒíƒœê°’

ì„ ëŒ€ì…í•˜ë©´ ë¯¸ë¦¬ êµ¬í˜„ëœ, ì œí•œ í•  ì•±ì„ ì„ íƒí•˜ëŠ” Modalë·°ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.

```swift
.familyActivityPicker(isPresented: Binding<Bool>,
selection: Binding<FamilyActivitySelection>)
```

ê·¸ë¦¬ê³  ê·¸ Modal ë·°ì—ì„œ ì•±ì„ ì„ íƒí•˜ë©´ ì•±ì˜ í† í°ë“¤ì´ ë‹´ê¸°ê²Œ ë˜ê³ 

íŠ¸ë¦¬ê±°ê°€ ë˜ëŠ” ë²„íŠ¼ì—ì„œ`setShieldRestrictions()` ì‹¤í–‰í•˜ë©´, ì„ íƒí•œ ì–´í”Œë“¤ì€ ì‚¬ìš©ì´ ì œí•œ ë©ë‹ˆë‹¤.
